<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DIY Messenger</title>
    <style>
      body {
        background-color: palevioletred;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }
      h1 {
        text-align: center;
        font-size: 8em;
        color: antiquewhite;
      }
      h3 {
        text-align: center;
        font-size: 4em;
        color: burlywood;
      }
      form {
        align-self: center;
      }
    </style>
  </head>
  <body>
    <h1>Hit me on my beeper</h1>
    <!--Design is my thing-->
    <h3>Send me a message</h3>
    <div class="" id="message" style="display: flex; justify-content: center">
      <input
        id="message_input"
        type="text"
        name="message"
        style="width: 400px; height: 40px"
      />
      <button id="submit" style="margin-left: 40px; width: 200px">
        GO GO GO!
      </button>
    </div>
    <!--
    <br/>
    <h3>When was the button pressed last?</h3>
    <div>
      <div class="status_box" style="display: flex; justify-content: center">
        <p id="status" style="font-size: x-large; color: antiquewhite">
          No response from gateway yet...
        </p>
      </div>
      <div style="display: flex; justify-content: center">
        <button id="update">What about now?</button>
      </div>
    </div>
    -->
    <script>
      document.getElementById("submit").onclick = function () {
        var visitor_message = document.getElementById("message_input").value;
        var xhr = new XMLHttpRequest();
        xhr.open("POST", "/Prod/send_message");

        xhr.setRequestHeader("Accept", "application/json");
        xhr.setRequestHeader("Content-Type", "application/json");

        xhr.onreadystatechange = function () {
          if (xhr.readyState === 4) {
              console.log(xhr.status);
              console.log(xhr.responseText);
          }};

        var data ={
          "message":visitor_message
        }

        xhr.send(JSON.stringify(data))
      };
    </script>
  </body>
</html>
